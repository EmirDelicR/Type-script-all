"use strict";
class Table {
    constructor(data) {
        this.x = [];
        this.y = [];
        this.data = data;
    }
    /* Step 1 */
    setWrapper(wrap) {
        return (this.wrapper = wrap);
    }
    /* Step 2 */
    draw() {
        if (!this.wrapper) {
            console.log("Error! No wrapper!");
            return;
        }
        this.wrapper.innerHTML = "";
        /* Step 3 */
        const tableDom = this.buildTableDom();
        this.wrapper.append(tableDom);
        this.loggingData();
    }
    /* Step 3 */
    buildTableDom() {
        const tableDom = document.createElement("div");
        tableDom.classList.add("table");
        const tableHeaders = this.buildTableHeaders(); /* Step 4 */
        tableDom.append(tableHeaders);
        this.buildTableBody(tableDom); /* Step 5 */
        return tableDom;
    }
    /* Step 4 */
    buildTableHeaders() {
        const tableHeadRow = document.createElement("div");
        tableHeadRow.classList.add("t-row", "t-header");
        const emptyCell = document.createElement("div");
        emptyCell.classList.add("empty", "black");
        tableHeadRow.append(emptyCell);
        for (let thName of this.x) {
            const headCell = document.createElement("div");
            headCell.classList.add("t-cell");
            headCell.innerHTML = thName;
            tableHeadRow.append(headCell);
        }
        return tableHeadRow;
    }
    /* Step 5 */
    buildTableBody(tableDom) {
        for (let index of this.y) {
            const tableBodyRow = this.buildTableBodyRow(index); /* Step 6 */
            tableDom.append(tableBodyRow);
        }
    }
    /* Step 6 */
    buildTableBodyRow(rowIndex) {
        let rowDom = document.createElement("div");
        rowDom.classList.add("t-row", "t-body");
        const rowNameCell = document.createElement("div");
        rowNameCell.classList.add("empty");
        rowNameCell.innerHTML = `${rowIndex + 1}`;
        rowDom.append(rowNameCell);
        for (let key of this.x) {
            rowDom = this.buildTableCellDom(key, rowIndex, rowDom);
        }
        return rowDom;
    }
    /* Step 7 */
    buildTableCellDom(key, rowIndex, rowDom) {
        let cell = document.createElement("div");
        cell.classList.add("t-cell");
        const rowData = this.data[rowIndex];
        cell.innerHTML = `${rowData[key]}`;
        rowDom.append(cell);
        return rowDom;
    }
    addRow(rowName) {
        this.y.push(rowName);
    }
    addCol(colName) {
        this.x.push(colName);
    }
    /* Step 12 (For console log data) */
    loggingData() {
        console.log("Data logging: ");
        console.log(this.data);
        console.log("#######################################");
    }
}
const initDomState = () => {
    const data = [
        {
            name: "Test Name",
            gander: "Test Gander",
            date: "Test date",
            place: "Test Place",
            city: "Test City",
            pizza: "Test Pizza",
            pizza2: "Test Pizza 2"
        },
        {
            name: "Test Name 2",
            gander: "Test Gander ####################### some long text to see if breaks",
            date: ">>>>>>>Test date second",
            place: "Test Place second",
            city: "Test City second",
            pizza: "Test Pizza second",
            pizza2: "Test Pizza second 2"
        }
    ];
    let test = new Table(data);
    let tableWrapper = document.getElementById("tableWrapper");
    test.setWrapper(tableWrapper);
    let axes = {
        x: Object.keys(data[0]),
        y: [
            ...Array(data.length)
                .fill(null)
                .map((x, i) => i)
        ]
    };
    for (let i of axes.y) {
        test.addRow(i);
    }
    for (let i of axes.x) {
        test.addCol(i);
    }
    test.draw();
    const colWidth = 94 / Object.keys(data[0]).length;
    const cells = document.getElementsByClassName("t-cell");
    for (let cell of cells) {
        cell.style.width = `${colWidth}%`;
    }
};
const domReady = (callBack) => {
    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", callBack);
    }
    if (document.readyState === "interactive") {
        callBack();
    }
};
domReady(initDomState);

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDcEI7S0FDRixDQUFDO0lBRUYsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEI7SUFFRCxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQjtJQUNELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVaLE1BQU0sUUFBUSxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNsRCxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEQsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7UUFDUixJQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHLFFBQVEsR0FBRyxDQUFDO0tBQ2xEO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxRQUFRLEdBQUcsQ0FBQyxRQUFvQixFQUFFLEVBQUU7SUFDeEMsSUFBSSxRQUFRLENBQUMsVUFBVSxLQUFLLFNBQVMsRUFBRTtRQUNyQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsUUFBUSxDQUFDLENBQUM7S0FDekQ7SUFDRCxJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssYUFBYSxFQUFFO1FBQ3pDLFFBQVEsRUFBRSxDQUFDO0tBQ1o7QUFDSCxDQUFDLENBQUM7QUFFRixRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBUYWJsZUludGVyZmFjZSB7XG4gIHg6IHN0cmluZ1tdO1xuICB5OiBudW1iZXJbXTtcbiAgd3JhcHBlcjogSFRNTEVsZW1lbnQ7XG4gIGRhdGE6IE9iamVjdFtdO1xuXG4gIHNldFdyYXBwZXIod3JhcDogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudDtcbiAgZHJhdygpOiB2b2lkO1xuICBhZGRSb3cocm93TmFtZTogbnVtYmVyKTogdm9pZDtcbiAgYWRkQ29sKGNvbE5hbWU6IHN0cmluZyk6IHZvaWQ7XG4gIGxvZ2dpbmdEYXRhKCk6IHZvaWQ7XG59XG5cbmNsYXNzIFRhYmxlIGltcGxlbWVudHMgVGFibGVJbnRlcmZhY2Uge1xuICB4OiBzdHJpbmdbXSA9IFtdO1xuICB5OiBudW1iZXJbXSA9IFtdO1xuICB3cmFwcGVyOiBIVE1MRWxlbWVudDtcbiAgZGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVtdO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IHsgW2tleTogbnVtYmVyXTogc3RyaW5nIH1bXSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cbiAgLyogU3RlcCAxICovXG4gIHB1YmxpYyBzZXRXcmFwcGVyKHdyYXA6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiAodGhpcy53cmFwcGVyID0gd3JhcCk7XG4gIH1cbiAgLyogU3RlcCAyICovXG4gIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy53cmFwcGVyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yISBObyB3cmFwcGVyIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLndyYXBwZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAvKiBTdGVwIDMgKi9cbiAgICBjb25zdCB0YWJsZURvbSA9IHRoaXMuYnVpbGRUYWJsZURvbSgpO1xuICAgIHRoaXMud3JhcHBlci5hcHBlbmQodGFibGVEb20pO1xuXG4gICAgdGhpcy5sb2dnaW5nRGF0YSgpO1xuICB9XG4gIC8qIFN0ZXAgMyAqL1xuICBwcml2YXRlIGJ1aWxkVGFibGVEb20oKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRhYmxlRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YWJsZURvbS5jbGFzc0xpc3QuYWRkKFwidGFibGVcIik7XG5cbiAgICBjb25zdCB0YWJsZUhlYWRlcnMgPSB0aGlzLmJ1aWxkVGFibGVIZWFkZXJzKCk7IC8qIFN0ZXAgNCAqL1xuICAgIHRhYmxlRG9tLmFwcGVuZCh0YWJsZUhlYWRlcnMpO1xuXG4gICAgdGhpcy5idWlsZFRhYmxlQm9keSh0YWJsZURvbSk7IC8qIFN0ZXAgNSAqL1xuXG4gICAgcmV0dXJuIHRhYmxlRG9tO1xuICB9XG4gIC8qIFN0ZXAgNCAqL1xuICBwcml2YXRlIGJ1aWxkVGFibGVIZWFkZXJzKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0YWJsZUhlYWRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhYmxlSGVhZFJvdy5jbGFzc0xpc3QuYWRkKFwidC1yb3dcIiwgXCJ0LWhlYWRlclwiKTtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGVtcHR5Q2VsbC5jbGFzc0xpc3QuYWRkKFwiZW1wdHlcIiwgXCJibGFja1wiKTtcbiAgICB0YWJsZUhlYWRSb3cuYXBwZW5kKGVtcHR5Q2VsbCk7XG5cbiAgICBmb3IgKGxldCB0aE5hbWUgb2YgdGhpcy54KSB7XG4gICAgICBjb25zdCBoZWFkQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBoZWFkQ2VsbC5jbGFzc0xpc3QuYWRkKFwidC1jZWxsXCIpO1xuICAgICAgaGVhZENlbGwuaW5uZXJIVE1MID0gdGhOYW1lO1xuICAgICAgdGFibGVIZWFkUm93LmFwcGVuZChoZWFkQ2VsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhYmxlSGVhZFJvdztcbiAgfVxuICAvKiBTdGVwIDUgKi9cbiAgcHJpdmF0ZSBidWlsZFRhYmxlQm9keSh0YWJsZURvbTogSFRNTEVsZW1lbnQpIHtcbiAgICBmb3IgKGxldCBpbmRleCBvZiB0aGlzLnkpIHtcbiAgICAgIGNvbnN0IHRhYmxlQm9keVJvdyA9IHRoaXMuYnVpbGRUYWJsZUJvZHlSb3coaW5kZXgpOyAvKiBTdGVwIDYgKi9cbiAgICAgIHRhYmxlRG9tLmFwcGVuZCh0YWJsZUJvZHlSb3cpO1xuICAgIH1cbiAgfVxuICAvKiBTdGVwIDYgKi9cbiAgcHJpdmF0ZSBidWlsZFRhYmxlQm9keVJvdyhyb3dJbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuICAgIGxldCByb3dEb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHJvd0RvbS5jbGFzc0xpc3QuYWRkKFwidC1yb3dcIiwgXCJ0LWJvZHlcIik7XG5cbiAgICBjb25zdCByb3dOYW1lQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcm93TmFtZUNlbGwuY2xhc3NMaXN0LmFkZChcImVtcHR5XCIpO1xuICAgIHJvd05hbWVDZWxsLmlubmVySFRNTCA9IGAke3Jvd0luZGV4ICsgMX1gO1xuXG4gICAgcm93RG9tLmFwcGVuZChyb3dOYW1lQ2VsbCk7XG5cbiAgICBmb3IgKGxldCBrZXkgb2YgdGhpcy54KSB7XG4gICAgICByb3dEb20gPSB0aGlzLmJ1aWxkVGFibGVDZWxsRG9tKGtleSwgcm93SW5kZXgsIHJvd0RvbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd0RvbTtcbiAgfVxuICAvKiBTdGVwIDcgKi9cbiAgcHJpdmF0ZSBidWlsZFRhYmxlQ2VsbERvbShcbiAgICBrZXk6IHN0cmluZyxcbiAgICByb3dJbmRleDogbnVtYmVyLFxuICAgIHJvd0RvbTogSFRNTERpdkVsZW1lbnRcbiAgKTogSFRNTERpdkVsZW1lbnQge1xuICAgIGxldCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJ0LWNlbGxcIik7XG4gICAgY29uc3Qgcm93RGF0YSA9IHRoaXMuZGF0YVtyb3dJbmRleF07XG4gICAgY2VsbC5pbm5lckhUTUwgPSBgJHtyb3dEYXRhW2tleV19YDtcblxuICAgIHJvd0RvbS5hcHBlbmQoY2VsbCk7XG5cbiAgICByZXR1cm4gcm93RG9tO1xuICB9XG4gIHB1YmxpYyBhZGRSb3cocm93TmFtZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy55LnB1c2gocm93TmFtZSk7XG4gIH1cbiAgcHVibGljIGFkZENvbChjb2xOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLngucHVzaChjb2xOYW1lKTtcbiAgfVxuICAvKiBTdGVwIDEyIChGb3IgY29uc29sZSBsb2cgZGF0YSkgKi9cbiAgcHVibGljIGxvZ2dpbmdEYXRhKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiRGF0YSBsb2dnaW5nOiBcIik7XG4gICAgY29uc29sZS5sb2codGhpcy5kYXRhKTtcbiAgICBjb25zb2xlLmxvZyhcIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1wiKTtcbiAgfVxufVxuXG5jb25zdCBpbml0RG9tU3RhdGUgPSAoKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSBbXG4gICAge1xuICAgICAgbmFtZTogXCJUZXN0IE5hbWVcIixcbiAgICAgIGdhbmRlcjogXCJUZXN0IEdhbmRlclwiLFxuICAgICAgZGF0ZTogXCJUZXN0IGRhdGVcIixcbiAgICAgIHBsYWNlOiBcIlRlc3QgUGxhY2VcIixcbiAgICAgIGNpdHk6IFwiVGVzdCBDaXR5XCIsXG4gICAgICBwaXp6YTogXCJUZXN0IFBpenphXCIsXG4gICAgICBwaXp6YTI6IFwiVGVzdCBQaXp6YSAyXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiVGVzdCBOYW1lIDJcIixcbiAgICAgIGdhbmRlcjpcbiAgICAgICAgXCJUZXN0IEdhbmRlciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBzb21lIGxvbmcgdGV4dCB0byBzZWUgaWYgYnJlYWtzXCIsXG4gICAgICBkYXRlOiBcIj4+Pj4+Pj5UZXN0IGRhdGUgc2Vjb25kXCIsXG4gICAgICBwbGFjZTogXCJUZXN0IFBsYWNlIHNlY29uZFwiLFxuICAgICAgY2l0eTogXCJUZXN0IENpdHkgc2Vjb25kXCIsXG4gICAgICBwaXp6YTogXCJUZXN0IFBpenphIHNlY29uZFwiLFxuICAgICAgcGl6emEyOiBcIlRlc3QgUGl6emEgc2Vjb25kIDJcIlxuICAgIH1cbiAgXTtcblxuICBsZXQgdGVzdCA9IG5ldyBUYWJsZShkYXRhKTtcbiAgbGV0IHRhYmxlV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFibGVXcmFwcGVyXCIpO1xuICB0ZXN0LnNldFdyYXBwZXIodGFibGVXcmFwcGVyIGFzIEhUTUxFbGVtZW50KTtcblxuICBsZXQgYXhlcyA9IHtcbiAgICB4OiBPYmplY3Qua2V5cyhkYXRhWzBdKSxcbiAgICB5OiBbXG4gICAgICAuLi5BcnJheShkYXRhLmxlbmd0aClcbiAgICAgICAgLmZpbGwobnVsbClcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gaSlcbiAgICBdXG4gIH07XG5cbiAgZm9yIChsZXQgaSBvZiBheGVzLnkpIHtcbiAgICB0ZXN0LmFkZFJvdyhpKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgb2YgYXhlcy54KSB7XG4gICAgdGVzdC5hZGRDb2woaSk7XG4gIH1cbiAgdGVzdC5kcmF3KCk7XG5cbiAgY29uc3QgY29sV2lkdGggPSA5NCAvIE9iamVjdC5rZXlzKGRhdGFbMF0pLmxlbmd0aDtcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidC1jZWxsXCIpO1xuICBmb3IgKGxldCBjZWxsIG9mIGNlbGxzKSB7XG4gICAgKDxIVE1MRWxlbWVudD5jZWxsKS5zdHlsZS53aWR0aCA9IGAke2NvbFdpZHRofSVgO1xuICB9XG59O1xuXG5jb25zdCBkb21SZWFkeSA9IChjYWxsQmFjazogKCkgPT4gdm9pZCkgPT4ge1xuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBjYWxsQmFjayk7XG4gIH1cbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiaW50ZXJhY3RpdmVcIikge1xuICAgIGNhbGxCYWNrKCk7XG4gIH1cbn07XG5cbmRvbVJlYWR5KGluaXREb21TdGF0ZSk7XG4iXX0=
